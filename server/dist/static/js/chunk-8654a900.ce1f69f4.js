(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8654a900"],{"09fa":function(t,e,n){var r=n("4588"),o=n("9def");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},"0f88":function(t,e,n){var r,o=n("7726"),i=n("32e9"),a=n("ca5a"),u=a("typed_array"),s=a("view"),c=!(!o.ArrayBuffer||!o.DataView),l=c,f=0,h=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(f<h)(r=o[p[f++]])?(i(r.prototype,u,!0),i(r.prototype,s,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:u,VIEW:s}},"34ef":function(t,e,n){n("ec30")("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),o=n("77f1"),i=n("9def");t.exports=function(t){var e=r(this),n=i(e.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);while(c>u)e[u++]=t;return e}},"69a0":function(t,e,n){(function(e){t.exports=e()})((function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];n+=(r&o|~r&i)+e[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+e[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+e[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+e[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[9]-343485551|0,r=(r<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function o(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var e,o,i,a,u,s,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(l,r(t.substring(e-64,e)));for(t=t.substring(e-64),o=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(l,i),e=0;e<16;e+=1)i[e]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=u,i[15]=s,n(l,i),l}function a(t){var e,r,i,a,u,s,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(l,o(t.subarray(e-64,e)));for(t=e-64<c?t.subarray(e-64):new Uint8Array(0),r=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(l,i),e=0;e<16;e+=1)i[e]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=u,i[15]=s,n(l,i),l}function u(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=u(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}function f(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function p(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==s(i("hello"))&&function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,a,u,s=this.byteLength,c=e(n,s),l=s;return r!==t&&(l=e(r,s)),c>l?new ArrayBuffer(0):(o=l-c,i=new ArrayBuffer(o),a=new Uint8Array(i),u=new Uint8Array(this,c,o),a.set(u),i)}}(),d.prototype.append=function(t){return this.appendBinary(c(t)),this},d.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},d.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=p(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(t,e){var r,o,i,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,t),a=0;a<16;a+=1)t[a]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=o,t[15]=i,n(this._hash,t)},d.hash=function(t,e){return d.hashBinary(c(t),e)},d.hashBinary=function(t,e){var n=i(t),r=s(n);return e?p(r):r},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(t){var e,r=h(this._buff.buffer,t,!0),i=r.length;for(this._length+=t.byteLength,e=64;e<=i;e+=64)n(this._hash,o(r.subarray(e-64,e)));return this._buff=e-64<i?new Uint8Array(r.buffer.slice(e-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=p(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var t=d.prototype.getState.call(this);return t.buff=f(t.buff),t},d.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),d.prototype.setState.call(this,t)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(t,e){var n=a(new Uint8Array(t)),r=s(n);return e?p(r):r},d}))},"91dd":function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!==typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var f,h,p,d,y=t[l].replace(u,"%20"),g=y.indexOf(n);g>=0?(f=y.substr(0,g),h=y.substr(g+1)):(f=y,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},b383:function(t,e,n){"use strict";e.decode=e.parse=n("91dd"),e.encode=e.stringify=n("e099")},ba92:function(t,e,n){"use strict";var r=n("4bf8"),o=n("77f1"),i=n("9def");t.exports=[].copyWithin||function(t,e){var n=r(this),a=i(n.length),u=o(t,a),s=o(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:o(c,a))-s,a-u),f=1;s<u&&u<s+l&&(f=-1,s+=l-1,u+=l-1);while(l-- >0)s in n?n[u]=n[s]:delete n[u],u+=f,s+=f;return n}},e099:function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===typeof t?i(a(t),(function(a){var u=encodeURIComponent(r(a))+n;return o(t[a])?i(t[a],(function(t){return u+encodeURIComponent(r(t))})).join(e):u+encodeURIComponent(r(t[a]))})).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},ec30:function(t,e,n){"use strict";if(n("9e1e")){var r=n("2d00"),o=n("7726"),i=n("79e5"),a=n("5ca1"),u=n("0f88"),s=n("ed0b"),c=n("9b43"),l=n("f605"),f=n("4630"),h=n("32e9"),p=n("dcbc"),d=n("4588"),y=n("9def"),g=n("09fa"),v=n("77f1"),b=n("6a99"),w=n("69a8"),m=n("23c6"),k=n("d3f4"),x=n("4bf8"),A=n("33a4"),I=n("2aeb"),S=n("38fd"),C=n("9093").f,_=n("27ee"),P=n("ca5a"),O=n("2b4c"),U=n("0a49"),E=n("c366"),R=n("ebd6"),z=n("cadf"),F=n("84f2"),L=n("5cc5"),T=n("7a56"),j=n("36bd"),q=n("ba92"),B=n("86cc"),H=n("11e9"),M=B.f,D=H.f,N=o.RangeError,V=o.TypeError,W=o.Uint8Array,G="ArrayBuffer",X="Shared"+G,J="BYTES_PER_ELEMENT",K="prototype",Y=Array[K],$=s.ArrayBuffer,Q=s.DataView,Z=U(0),tt=U(2),et=U(3),nt=U(4),rt=U(5),ot=U(6),it=E(!0),at=E(!1),ut=z.values,st=z.keys,ct=z.entries,lt=Y.lastIndexOf,ft=Y.reduce,ht=Y.reduceRight,pt=Y.join,dt=Y.sort,yt=Y.slice,gt=Y.toString,vt=Y.toLocaleString,bt=O("iterator"),wt=O("toStringTag"),mt=P("typed_constructor"),kt=P("def_constructor"),xt=u.CONSTR,At=u.TYPED,It=u.VIEW,St="Wrong length!",Ct=U(1,(function(t,e){return Et(R(t,t[kt]),e)})),_t=i((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Pt=!!W&&!!W[K].set&&i((function(){new W(1).set({})})),Ot=function(t,e){var n=d(t);if(n<0||n%e)throw N("Wrong offset!");return n},Ut=function(t){if(k(t)&&At in t)return t;throw V(t+" is not a typed array!")},Et=function(t,e){if(!k(t)||!(mt in t))throw V("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return zt(R(t,t[kt]),e)},zt=function(t,e){var n=0,r=e.length,o=Et(t,r);while(r>n)o[n]=e[n++];return o},Ft=function(t,e,n){M(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,r,o,i,a,u=x(t),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=_(u);if(void 0!=h&&!A(h)){for(a=h.call(u),r=[],e=0;!(i=a.next()).done;e++)r.push(i.value);u=r}for(f&&s>2&&(l=c(l,arguments[2],2)),e=0,n=y(u.length),o=Et(this,n);n>e;e++)o[e]=f?l(u[e],e):u[e];return o},Tt=function(){var t=0,e=arguments.length,n=Et(this,e);while(e>t)n[t]=arguments[t++];return n},jt=!!W&&i((function(){vt.call(new W(1))})),qt=function(){return vt.apply(jt?yt.call(Ut(this)):Ut(this),arguments)},Bt={copyWithin:function(t,e){return q.call(Ut(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Ut(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return j.apply(Ut(this),arguments)},filter:function(t){return Rt(this,tt(Ut(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Ut(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(Ut(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Ut(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Ut(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Ut(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Ut(this),arguments)},lastIndexOf:function(t){return lt.apply(Ut(this),arguments)},map:function(t){return Ct(Ut(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ft.apply(Ut(this),arguments)},reduceRight:function(t){return ht.apply(Ut(this),arguments)},reverse:function(){var t,e=this,n=Ut(e).length,r=Math.floor(n/2),o=0;while(o<r)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return et(Ut(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Ut(this),t)},subarray:function(t,e){var n=Ut(this),r=n.length,o=v(t,r);return new(R(n,n[kt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,y((void 0===e?r:v(e,r))-o))}},Ht=function(t,e){return Rt(this,yt.call(Ut(this),t,e))},Mt=function(t){Ut(this);var e=Ot(arguments[1],1),n=this.length,r=x(t),o=y(r.length),i=0;if(o+e>n)throw N(St);while(i<o)this[e+i]=r[i++]},Dt={entries:function(){return ct.call(Ut(this))},keys:function(){return st.call(Ut(this))},values:function(){return ut.call(Ut(this))}},Nt=function(t,e){return k(t)&&t[At]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return Nt(t,e=b(e,!0))?f(2,t[e]):D(t,e)},Wt=function(t,e,n){return!(Nt(t,e=b(e,!0))&&k(n)&&w(n,"value"))||w(n,"get")||w(n,"set")||n.configurable||w(n,"writable")&&!n.writable||w(n,"enumerable")&&!n.enumerable?M(t,e,n):(t[e]=n.value,t)};xt||(H.f=Vt,B.f=Wt),a(a.S+a.F*!xt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Wt}),i((function(){gt.call({})}))&&(gt=vt=function(){return pt.call(this)});var Gt=p({},Bt);p(Gt,Dt),h(Gt,bt,Dt.values),p(Gt,{slice:Ht,set:Mt,constructor:function(){},toString:gt,toLocaleString:qt}),Ft(Gt,"buffer","b"),Ft(Gt,"byteOffset","o"),Ft(Gt,"byteLength","l"),Ft(Gt,"length","e"),M(Gt,wt,{get:function(){return this[At]}}),t.exports=function(t,e,n,s){s=!!s;var c=t+(s?"Clamped":"")+"Array",f="get"+t,p="set"+t,d=o[c],v=d||{},b=d&&S(d),w=!d||!u.ABV,x={},A=d&&d[K],_=function(t,n){var r=t._d;return r.v[f](n*e+r.o,_t)},P=function(t,n,r){var o=t._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](n*e+o.o,r,_t)},O=function(t,e){M(t,e,{get:function(){return _(this,e)},set:function(t){return P(this,e,t)},enumerable:!0})};w?(d=n((function(t,n,r,o){l(t,d,c,"_d");var i,a,u,s,f=0,p=0;if(k(n)){if(!(n instanceof $||(s=m(n))==G||s==X))return At in n?zt(d,n):Lt.call(d,n);i=n,p=Ot(r,e);var v=n.byteLength;if(void 0===o){if(v%e)throw N(St);if(a=v-p,a<0)throw N(St)}else if(a=y(o)*e,a+p>v)throw N(St);u=a/e}else u=g(n),a=u*e,i=new $(a);h(t,"_d",{b:i,o:p,l:a,e:u,v:new Q(i)});while(f<u)O(t,f++)})),A=d[K]=I(Gt),h(A,"constructor",d)):i((function(){d(1)}))&&i((function(){new d(-1)}))&&L((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=n((function(t,n,r,o){var i;return l(t,d,c),k(n)?n instanceof $||(i=m(n))==G||i==X?void 0!==o?new v(n,Ot(r,e),o):void 0!==r?new v(n,Ot(r,e)):new v(n):At in n?zt(d,n):Lt.call(d,n):new v(g(n))})),Z(b!==Function.prototype?C(v).concat(C(b)):C(v),(function(t){t in d||h(d,t,v[t])})),d[K]=A,r||(A.constructor=d));var U=A[bt],E=!!U&&("values"==U.name||void 0==U.name),R=Dt.values;h(d,mt,!0),h(A,At,c),h(A,It,!0),h(A,kt,d),(s?new d(1)[wt]==c:wt in A)||M(A,wt,{get:function(){return c}}),x[c]=d,a(a.G+a.W+a.F*(d!=v),x),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*i((function(){v.of.call(d,1)})),c,{from:Lt,of:Tt}),J in A||h(A,J,e),a(a.P,c,Bt),T(c),a(a.P+a.F*Pt,c,{set:Mt}),a(a.P+a.F*!E,c,Dt),r||A.toString==gt||(A.toString=gt),a(a.P+a.F*i((function(){new d(1).slice()})),c,{slice:Ht}),a(a.P+a.F*(i((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!i((function(){A.toLocaleString.call([1,2])}))),c,{toLocaleString:qt}),F[c]=E?U:R,r||E||h(A,bt,R)}}else t.exports=function(){}},ed0b:function(t,e,n){"use strict";var r=n("7726"),o=n("9e1e"),i=n("2d00"),a=n("0f88"),u=n("32e9"),s=n("dcbc"),c=n("79e5"),l=n("f605"),f=n("4588"),h=n("9def"),p=n("09fa"),d=n("9093").f,y=n("86cc").f,g=n("36bd"),v=n("7f20"),b="ArrayBuffer",w="DataView",m="prototype",k="Wrong length!",x="Wrong index!",A=r[b],I=r[w],S=r.Math,C=r.RangeError,_=r.Infinity,P=A,O=S.abs,U=S.pow,E=S.floor,R=S.log,z=S.LN2,F="buffer",L="byteLength",T="byteOffset",j=o?"_b":F,q=o?"_l":L,B=o?"_o":T;function H(t,e,n){var r,o,i,a=new Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,l=23===e?U(2,-24)-U(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for(t=O(t),t!=t||t===_?(o=t!=t?1:0,r=s):(r=E(R(t)/z),t*(i=U(2,-r))<1&&(r--,i*=2),t+=r+c>=1?l/i:l*U(2,1-c),t*i>=2&&(r++,i/=2),r+c>=s?(o=0,r=s):r+c>=1?(o=(t*i-1)*U(2,e),r+=c):(o=t*U(2,c-1)*U(2,e),r=0));e>=8;a[f++]=255&o,o/=256,e-=8);for(r=r<<e|o,u+=e;u>0;a[f++]=255&r,r/=256,u-=8);return a[--f]|=128*h,a}function M(t,e,n){var r,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],l=127&c;for(c>>=7;u>0;l=256*l+t[s],s--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=e;u>0;r=256*r+t[s],s--,u-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:c?-_:_;r+=U(2,e),l-=a}return(c?-1:1)*r*U(2,l-e)}function D(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function N(t){return[255&t]}function V(t){return[255&t,t>>8&255]}function W(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return H(t,52,8)}function X(t){return H(t,23,4)}function J(t,e,n){y(t[m],e,{get:function(){return this[n]}})}function K(t,e,n,r){var o=+n,i=p(o);if(i+e>t[q])throw C(x);var a=t[j]._b,u=i+t[B],s=a.slice(u,u+e);return r?s:s.reverse()}function Y(t,e,n,r,o,i){var a=+n,u=p(a);if(u+e>t[q])throw C(x);for(var s=t[j]._b,c=u+t[B],l=r(+o),f=0;f<e;f++)s[c+f]=l[i?f:e-f-1]}if(a.ABV){if(!c((function(){A(1)}))||!c((function(){new A(-1)}))||c((function(){return new A,new A(1.5),new A(NaN),A.name!=b}))){A=function(t){return l(this,A),new P(p(t))};for(var $,Q=A[m]=P[m],Z=d(P),tt=0;Z.length>tt;)($=Z[tt++])in A||u(A,$,P[$]);i||(Q.constructor=A)}var et=new I(new A(2)),nt=I[m].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||s(I[m],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else A=function(t){l(this,A,b);var e=p(t);this._b=g.call(new Array(e),0),this[q]=e},I=function(t,e,n){l(this,I,w),l(t,A,w);var r=t[q],o=f(e);if(o<0||o>r)throw C("Wrong offset!");if(n=void 0===n?r-o:h(n),o+n>r)throw C(k);this[j]=t,this[B]=o,this[q]=n},o&&(J(A,L,"_l"),J(I,F,"_b"),J(I,L,"_l"),J(I,T,"_o")),s(I[m],{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var e=K(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=K(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return D(K(this,4,t,arguments[1]))},getUint32:function(t){return D(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return M(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return M(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,N,e)},setUint8:function(t,e){Y(this,1,t,N,e)},setInt16:function(t,e){Y(this,2,t,V,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,V,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,W,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,W,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,X,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,G,e,arguments[2])}});v(A,b),v(I,w),u(I[m],a.VIEW,!0),e[b]=A,e[w]=I},f744:function(t,e,n){"use strict";n.d(e,"d",(function(){return Nt})),n.d(e,"c",(function(){return G})),n.d(e,"a",(function(){return ae})),n.d(e,"b",(function(){return j}));var r,o=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){t["InvalidFile"]="InvalidFile",t["InvalidToken"]="InvalidToken",t["InvalidMetadata"]="InvalidMetadata",t["InvalidChunkSize"]="InvalidChunkSize",t["InvalidCustomVars"]="InvalidCustomVars",t["NotAvailableUploadHost"]="NotAvailableUploadHost",t["ReadCacheFailed"]="ReadCacheFailed",t["InvalidCacheData"]="InvalidCacheData",t["WriteCacheFailed"]="WriteCacheFailed",t["RemoveCacheFailed"]="RemoveCacheFailed",t["GetCanvasContextFailed"]="GetCanvasContextFailed",t["UnsupportedFileType"]="UnsupportedFileType",t["FileReaderReadFailed"]="FileReaderReadFailed",t["NotAvailableXMLHttpRequest"]="NotAvailableXMLHttpRequest",t["InvalidProgressEventTarget"]="InvalidProgressEventTarget",t["RequestError"]="RequestError"})(r||(r={}));var i=function(){function t(t,e){this.name=t,this.message=e,this.stack=(new Error).stack}return t}(),a=function(t){function e(e,n,o,i){var a=t.call(this,r.RequestError,o)||this;return a.code=e,a.reqId=n,a.isRequestError=!0,a.data=i,a}return o(e,t),e}(i),u=function(t){function e(e,n){return void 0===n&&(n=""),t.call(this,0,n,e)||this}return o(e,t),e}(a),s=function(){function t(t,e){this.runTask=t,this.limit=e,this.aborted=!1,this.queue=[],this.processing=[]}return t.prototype.enqueue=function(t){var e=this;return new Promise((function(n,r){e.queue.push({task:t,resolve:n,reject:r}),e.check()}))},t.prototype.run=function(t){var e=this;this.queue=this.queue.filter((function(e){return e!==t})),this.processing.push(t),this.runTask(t.task).then((function(){e.processing=e.processing.filter((function(e){return e!==t})),t.resolve(),e.check()}),(function(e){return t.reject(e)}))},t.prototype.check=function(){var t=this;if(!this.aborted){var e=this.processing.length,n=this.limit-e;this.queue.slice(0,n).forEach((function(e){t.run(e)}))}},t.prototype.abort=function(){this.queue=[],this.aborted=!0},t}(),c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)},f=function(){function t(){this.closed=!1}return t.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},t.prototype.add=function(t){this._unsubscribe=t},t}(),h=function(t){function e(e,n,r){var o=t.call(this)||this;return o.isStopped=!1,o.destination=e&&"object"===typeof e?e:l(l(l({},e&&{next:e}),n&&{error:n}),r&&{complete:r}),o}return c(e,t),e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype.next=function(t){!this.isStopped&&this.destination.next&&this.destination.next(t)},e.prototype.error=function(t){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(t))},e.prototype.complete=function(t){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(t))},e}(f),p=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){var r=new h(t,e,n);return r.add(this._subscribe(r)),r},t}();function d(t){if(null===t||"undefined"===typeof t)return"";var e,n,r=t+"",o="",i=0;e=n=0,i=r.length;for(var a=0;a<i;a++){var u=r.charCodeAt(a),s=null;if(u<128)n++;else if(u>127&&u<2048)s=String.fromCharCode(u>>6|192,63&u|128);else if((63488&u^55296)>0)s=String.fromCharCode(u>>12|224,u>>6&63|128,63&u|128);else{if((64512&u^55296)>0)throw new RangeError("Unmatched trail surrogate at "+a);var c=r.charCodeAt(++a);if((64512&c^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(a-1));u=((1023&u)<<10)+(1023&c)+65536,s=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}null!==s&&(n>e&&(o+=r.slice(e,n)),o+=s,e=n=a+1)}return n>e&&(o+=r.slice(e,i)),o}function y(t){var e=[],n=0,r=0,o=0;t+="";while(n<t.length){r=255&t.charCodeAt(n),o=0,r<=191?(r&=127,o=1):r<=223?(r&=31,o=2):r<=239?(r&=15,o=3):(r&=7,o=4);for(var i=1;i<o;++i)r=r<<6|63&t.charCodeAt(i+n);4===o?(r-=65536,e.push(String.fromCharCode(55296|r>>10&1023)),e.push(String.fromCharCode(56320|1023&r))):e.push(String.fromCharCode(r)),n+=o}return e.join("")}function g(t){var e,n,r,o,i,a,u,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,h="",p=[];if(!t)return t;t=d(t+"");do{e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),s=e<<16|n<<8|r,o=s>>18&63,i=s>>12&63,a=s>>6&63,u=63&s,p[f++]=c.charAt(o)+c.charAt(i)+c.charAt(a)+c.charAt(u)}while(l<t.length);switch(h=p.join(""),t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"=";break}return h}function v(t){var e,n,r,o,i,a,u,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,h="",p=[];if(!t)return t;t+="";do{o=c.indexOf(t.charAt(l++)),i=c.indexOf(t.charAt(l++)),a=c.indexOf(t.charAt(l++)),u=c.indexOf(t.charAt(l++)),s=o<<18|i<<12|a<<6|u,e=s>>16&255,n=s>>8&255,r=255&s,p[f++]=64===a?String.fromCharCode(e):64===u?String.fromCharCode(e,n):String.fromCharCode(e,n,r)}while(l<t.length);return h=p.join(""),y(h)}function b(t){return t=g(t),t.replace(/\//g,"_").replace(/\+/g,"-")}function w(t){return t=t.replace(/_/g,"/").replace(/-/g,"+"),v(t)}var m,k=n("69a0"),x=n.n(k),A=function(){return A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},A.apply(this,arguments)},I=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},C=Math.pow(1024,2);function _(t,e){var n=e*C;if(n>t.size)n=t.size;else while(t.size>1e4*n)n*=2;for(var r=[],o=Math.ceil(t.size/n),i=0;i<o;i++){var a=t.slice(n*i,i===o-1?t.size:n*(i+1));r.push(a)}return r}function P(t){return Object.keys(t).every((function(t){return 0===t.indexOf("x-qn-meta-")}))}function O(t){return Object.keys(t).every((function(t){return 0===t.indexOf("x:")}))}function U(t){return t.reduce((function(t,e){return t+e}),0)}function E(t,e,n){try{localStorage.setItem(t,JSON.stringify(e))}catch(o){n.warn(new i(r.WriteCacheFailed,"setLocalFileInfo failed: "+t))}}function R(t,e,n){var r=null==e?"_":"_key_"+e+"_";return"qiniu_js_sdk_upload_file_name_"+t+r+"size_"+n}function z(t,e){try{localStorage.removeItem(t)}catch(n){e.warn(new i(r.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+t))}}function F(t,e){var n=null;try{n=localStorage.getItem(t)}catch(a){e.warn(new i(r.ReadCacheFailed,"getLocalFileInfo failed. key: "+t))}if(null==n)return null;var o=null;try{o=JSON.parse(n)}catch(u){z(t,e),e.warn(new i(r.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+t))}return o}function L(t){var e="UpToken "+t;return{Authorization:e}}function T(t){var e=L(t);return A({"content-type":"application/octet-stream"},e)}function j(t){var e=L(t);return A({"content-type":"application/json"},e)}function q(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new i(r.NotAvailableXMLHttpRequest,"the current environment does not support.")}function B(t){return I(this,void 0,void 0,(function(){var e,n;return S(this,(function(r){switch(r.label){case 0:return[4,H(t)];case 1:return e=r.sent(),n=new x.a.ArrayBuffer,n.append(e),[2,n.end()]}}))}))}function H(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){if(t.target){var o=t.target.result;e(o)}else n(new i(r.InvalidProgressEventTarget,"progress event target is undefined"))},o.onerror=function(){n(new i(r.FileReaderReadFailed,"fileReader read failed"))},o.readAsArrayBuffer(t)}))}function M(t,e){return new Promise((function(n,r){var o=q();if(o.open(e.method,t),e.onCreate&&e.onCreate(o),e.headers){var i=e.headers;Object.keys(i).forEach((function(t){o.setRequestHeader(t,i[t])}))}o.upload.addEventListener("progress",(function(t){t.lengthComputable&&e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})})),o.onreadystatechange=function(){var t=o.responseText;if(4===o.readyState){var e=o.getResponseHeader("x-reqId")||"";if(0!==o.status)if(200===o.status)try{n({data:JSON.parse(t),reqId:e})}catch(c){r(c)}else{var i="xhr request failed, code: "+o.status;t&&(i+=" response: "+t);var s=void 0;try{s=JSON.parse(t)}catch(l){}r(new a(o.status,e,i,s))}else r(new u("network error.",e))}},o.send(e.body)}))}function D(t){if(t&&t.match){var e=t.match(/(^https?)/);if(!e)return"";var n=e[1];return e=t.match(/^https?:\/\/([^:^/]*):(\d*)/),e?e[2]:"http"===n?"80":"443"}return""}function N(t){if(t&&t.match){var e=t.match(/^https?:\/\/([^:^/]*)/);return e?e[1]:""}return""}function V(t){if(!t)throw new i(r.InvalidToken,"invalid token.");var e=t.split(":");if(1===e.length)throw new i(r.InvalidToken,"invalid token segments.");var n=e.length>3?e[1]:e[0];if(!n)throw new i(r.InvalidToken,"missing assess key field.");var o=null;try{o=JSON.parse(w(e[e.length-1]))}catch(u){throw new i(r.InvalidToken,"token parse failed.")}if(null==o)throw new i(r.InvalidToken,"putPolicy is null.");if(null==o.scope)throw new i(r.InvalidToken,"scope field is null.");var a=o.scope.split(":")[0];if(!a)throw new i(r.InvalidToken,"resolve bucketName failed.");return{assessKey:n,bucketName:a,scope:o.scope}}function W(t){var e=window.URL||window.webkitURL||window.mozURL;return e.createObjectURL(t)}var G={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"},X=(m={},m[G.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},m[G.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},m[G.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},m[G.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},m[G.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},m[G.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},m),J=n("b383"),K=function(){return K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},K.apply(this,arguments)},Y=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},$=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function Q(t,e,n){return Y(this,void 0,void 0,(function(){var r,o;return $(this,(function(i){return r=Object(J["stringify"])({ak:t,bucket:e}),o=n+"://api.qiniu.com/v2/query?"+r,[2,M(o,{method:"GET"})]}))}))}function Z(t,e,n){var r=n.url,o=n.id;return r+"/buckets/"+t+"/objects/"+(null!=e?b(e):"~")+"/uploads/"+o}function tt(t,e,n,r){var o=r+"/buckets/"+e+"/objects/"+(null!=n?b(n):"~")+"/uploads";return M(o,{method:"POST",headers:L(t)})}function et(t,e,n,r,o){var i=V(t).bucketName,a=Z(i,e,r)+"/"+n,u=T(t);return o.md5&&(u["Content-MD5"]=o.md5),M(a,K(K({},o),{method:"PUT",headers:u}))}function nt(t,e,n,r){var o=V(t).bucketName,i=Z(o,e,n);return M(i,K(K({},r),{method:"POST",headers:j(t)}))}function rt(t,e,n){return M(t,K({method:"POST",body:e},n))}var ot=function(){return ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ot.apply(this,arguments)},it=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},at=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ut=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},st=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ut(arguments[e]));return t},ct=4,lt=[0,502,503,504,599],ft=st(lt,[612]),ht=Math.pow(1024,3),pt=function(){function t(t,e,n,r){this.hostPool=n,this.logger=r,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=t.config,r.info("config inited.",this.config),this.putExtra=ot({fname:""},t.putExtra),r.info("putExtra inited.",this.putExtra),this.key=t.key,this.file=t.file,this.token=t.token,this.onData=e.onData,this.onError=e.onError,this.onComplete=e.onComplete;try{var o=V(this.token);this.bucketName=o.bucketName,this.assessKey=o.assessKey}catch(i){r.error("get putPolicy from token failed.",i),this.onError(i)}}return t.prototype.checkAndUpdateUploadHost=function(){return it(this,void 0,void 0,(function(){var t;return at(this,(function(e){switch(e.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(t=e.sent(),null==t)throw new i(r.NotAvailableUploadHost,"no available upload host.");return null!=this.uploadHost&&this.uploadHost.host!==t.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+t.host+"."):this.logger.info("use host "+t.host+"."),this.uploadHost=t,[2]}}))}))},t.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),null!=this.uploadHost&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},t.prototype.checkAndFreezeHost=function(t){this.logger.info("check freeze host."),t instanceof a&&null!=this.uploadHost&&lt.includes(t.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},t.prototype.handleError=function(t){this.logger.error(t.message),this.onError(t)},t.prototype.putFile=function(){return it(this,void 0,void 0,(function(){var t,e,n,o;return at(this,(function(u){switch(u.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*ht)return this.handleError(new i(r.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!O(this.putExtra.customVars))return this.handleError(new i(r.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!P(this.putExtra.metadata))return this.handleError(new i(r.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];u.label=1;case 1:return u.trys.push([1,4,,5]),this.uploadAt=(new Date).getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return u.sent(),[4,this.run()];case 3:return t=u.sent(),this.onComplete(t.data),this.checkAndUnfreezeHost(),this.sendLog(t.reqId,200),[2];case 4:return e=u.sent(),this.aborted?(this.logger.warn("upload is aborted."),this.sendLog("",-2),[2]):(this.clear(),this.logger.error(e),e instanceof a&&(this.sendLog(e.reqId,e.code),this.checkAndFreezeHost(e),n=++this.retryCount<=this.config.retryCount,o=ft.includes(e.code),o&&n)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(e),[3,5]));case 5:return[2]}}))}))},t.prototype.clear=function(){this.xhrList.forEach((function(t){t.onreadystatechange=null,t.abort()})),this.xhrList=[],this.logger.info("cleanup uploading xhr.")},t.prototype.stop=function(){this.logger.info("aborted."),this.clear(),this.aborted=!0},t.prototype.addXhr=function(t){this.xhrList.push(t)},t.prototype.sendLog=function(t,e){var n,r;this.logger.report({code:e,reqId:t,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:D(null===(n=this.uploadHost)||void 0===n?void 0:n.getUrl()),host:N(null===(r=this.uploadHost)||void 0===r?void 0:r.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor(((new Date).getTime()-this.uploadAt)/1e3)})},t.prototype.getProgressInfoItem=function(t,e,n){return ot({size:e,loaded:t,percent:t/e*100},null==n?{}:{fromCache:n})},t}(),dt=pt,yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(){return gt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},gt.apply(this,arguments)},vt=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},bt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function wt(t){var e=/^[1-9]\d*$/;return e.test(String(t))}var mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yt(e,t),e.prototype.run=function(){return vt(this,void 0,void 0,(function(){var t,e,n,o,u,c=this;return bt(this,(function(l){switch(l.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!wt(this.config.chunkSize))throw new i(r.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new i(r.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:l.sent(),t=new s((function(e){return vt(c,void 0,void 0,(function(){return bt(this,(function(n){switch(n.label){case 0:if(this.aborted)throw t.abort(),new Error("pool is aborted");return[4,this.uploadChunk(e)];case 1:return n.sent(),[2]}}))}))}),this.config.concurrentRequestLimit),e=null,n=this.getLocalKey(),o=this.chunks.map((function(e,n){return t.enqueue({chunk:e,index:n})})),l.label=2;case 2:return l.trys.push([2,5,,6]),[4,Promise.all(o)];case 3:return l.sent(),[4,this.mkFileReq()];case 4:return e=l.sent(),[3,6];case 5:throw u=l.sent(),u instanceof a&&(612===u.code||400===u.code)&&z(n,this.logger),u;case 6:return z(n,this.logger),[2,e]}}))}))},e.prototype.uploadChunk=function(t){return vt(this,void 0,void 0,(function(){var e,n,r,o,i,a,u,s,c,l=this;return bt(this,(function(f){switch(f.label){case 0:return e=t.index,n=t.chunk,r=this.cachedUploadedList[e],this.logger.info("upload part "+e+", cache:",r),o=this.config.checkByMD5,i=function(){l.usedCacheList[e]=!0,l.updateChunkProgress(n.size,e),l.uploadedList[e]=r,l.updateLocalCache()},r&&!o?(i(),[2]):[4,B(n)];case 1:return a=f.sent(),this.logger.info("computed part md5.",a),r&&a===r.md5?(i(),[2]):(this.usedCacheList[e]=!1,u=function(t){l.updateChunkProgress(t.loaded,e)},s={body:n,md5:this.config.checkByServer?a:void 0,onProgress:u,onCreate:function(t){return l.addXhr(t)}},this.logger.info("part "+e+" start uploading."),[4,et(this.token,this.key,t.index+1,this.getUploadInfo(),s)]);case 2:return c=f.sent(),this.logger.info("part "+e+" upload completed."),u({loaded:n.size,total:n.size}),this.uploadedList[e]={etag:c.data.etag,md5:c.data.md5,size:n.size},this.updateLocalCache(),[2]}}))}))},e.prototype.mkFileReq=function(){return vt(this,void 0,void 0,(function(){var t,e,n=this;return bt(this,(function(r){switch(r.label){case 0:return t=gt(gt(gt({parts:this.uploadedList.map((function(t,e){return{etag:t.etag,partNumber:e+1}})),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",t),[4,nt(this.token,this.key,this.getUploadInfo(),{onCreate:function(t){return n.addXhr(t)},body:JSON.stringify(t)})];case 1:return e=r.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,e]}}))}))},e.prototype.initBeforeUploadChunks=function(){return vt(this,void 0,void 0,(function(){var t,e,n;return bt(this,(function(r){switch(r.label){case 0:return this.uploadedList=[],this.usedCacheList=[],t=F(this.getLocalKey(),this.logger),t?[3,2]:(this.logger.info("init upload parts from api."),[4,tt(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return e=r.sent(),this.logger.info("initd upload parts of id: "+e.data.uploadId+"."),this.uploadId=e.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:n=["resume upload parts from local cache,","total "+t.data.length+" part,","id is "+t.id+"."],this.logger.info(n.join(" ")),this.cachedUploadedList=t.data,this.uploadId=t.id,r.label=3;case 3:return this.chunks=_(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map((function(t){return 0}))},this.notifyResumeProgress(),[2]}}))}))},e.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},e.prototype.getLocalKey=function(){return R(this.file.name,this.key,this.file.size)},e.prototype.updateLocalCache=function(){E(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},e.prototype.updateChunkProgress=function(t,e){this.loaded.chunks[e]=t,this.notifyResumeProgress()},e.prototype.updateMkFileProgress=function(t){this.loaded.mkFileProgress=t,this.notifyResumeProgress()},e.prototype.notifyResumeProgress=function(){var t=this;this.progress={total:this.getProgressInfoItem(U(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map((function(e,n){var r=t.usedCacheList[n];return t.getProgressInfoItem(t.loaded.chunks[n],e.size,r)})),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},e}(dt),kt=mt,xt=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},At=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},It=function(){function t(){this.crc=-1,this.table=this.makeTable()}return t.prototype.makeTable=function(){for(var t=new Array,e=0;e<256;e++){for(var n=e,r=0;r<8;r++)1&n?n=n>>>1^3988292384:n>>>=1;t[e]=n}return t},t.prototype.append=function(t){for(var e=this.crc,n=0;n<t.byteLength;n++)e=e>>>8^this.table[255&(e^t[n])];this.crc=e},t.prototype.compute=function(){return(-1^this.crc)>>>0},t.prototype.readAsUint8Array=function(t){return xt(this,void 0,void 0,(function(){var e;return At(this,(function(n){switch(n.label){case 0:return"function"!==typeof t.arrayBuffer?[3,2]:(e=Uint8Array.bind,[4,t.arrayBuffer()]);case 1:return[2,new(e.apply(Uint8Array,[void 0,n.sent()]))];case 2:return[2,new Promise((function(e,n){var r=new FileReader;r.onload=function(){null!=r.result&&"string"!==typeof r.result?e(new Uint8Array(r.result)):n()},r.readAsArrayBuffer(t)}))]}}))}))},t.prototype.file=function(t){return xt(this,void 0,void 0,(function(){var e,n,r,o,i,a;return At(this,(function(u){switch(u.label){case 0:return t.size<=C?(e=this.append,[4,this.readAsUint8Array(t)]):[3,2];case 1:return e.apply(this,[u.sent()]),[2,this.compute()];case 2:n=Math.ceil(t.size/C),r=0,u.label=3;case 3:return r<n?(o=r*C,i=r===n-1?t.size:o+C,[4,this.readAsUint8Array(t.slice(o,i))]):[3,6];case 4:a=u.sent(),this.append(new Uint8Array(a)),u.label=5;case 5:return r++,[3,3];case 6:return[2,this.compute()]}}))}))},t.file=function(e){var n=new t;return n.file(e)},t}(),St=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ct=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},_t=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return St(e,t),e.prototype.run=function(){return Ct(this,void 0,void 0,(function(){var t,e,n,r,o=this;return _t(this,(function(i){switch(i.label){case 0:return this.logger.info("start run Direct."),t=new FormData,t.append("file",this.file),t.append("token",this.token),null!=this.key&&t.append("key",this.key),t.append("fname",this.putExtra.fname),this.config.checkByServer?[4,It.file(this.file)]:[3,2];case 1:e=i.sent(),t.append("crc32",e.toString()),i.label=2;case 2:return this.putExtra.customVars&&(this.logger.info("init customVars."),n=this.putExtra.customVars,Object.keys(n).forEach((function(e){return t.append(e,n[e].toString())})),this.logger.info("customVars inited.")),this.logger.info("formData inited."),[4,rt(this.uploadHost.getUrl(),t,{onProgress:function(t){o.updateDirectProgress(t.loaded,t.total)},onCreate:function(t){return o.addXhr(t)}})];case 3:return r=i.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,r]}}))}))},e.prototype.updateDirectProgress=function(t,e){this.progress={total:this.getProgressInfoItem(t,e+1)},this.onData(this.progress)},e.prototype.finishDirectProgress=function(){if(!this.progress)return this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},void this.onData(this.progress);var t=this.progress.total;this.progress={total:this.getProgressInfoItem(t.loaded+1,t.size)},this.onData(this.progress)},e}(dt),Ot=Pt;function Ut(t,e,n){void 0===n&&(n=3);var r=q();r.open("POST","https://uplog.qbox.me/log/3"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Authorization",L(t).Authorization),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&n>0&&Ut(t,e,n-1)};var o=[e.code||"",e.reqId||"",e.host||"",e.remoteIp||"",e.port||"",e.duration||"",e.time||"",e.bytesSent||"",e.upType||"",e.size||""].join(",");r.send(o)}var Et=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Rt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Et(arguments[e]));return t},zt=function(){function t(e,n,r,o){void 0===n&&(n=!0),void 0===r&&(r="OFF"),void 0===o&&(o="UPLOAD"),this.token=e,this.disableReport=n,this.level=r,this.prefix=o,this.id=++t.id}return t.prototype.getPrintPrefix=function(t){return"Qiniu-JS-SDK ["+t+"]["+this.prefix+"#"+this.id+"]:"},t.prototype.report=function(t,e){if(!this.disableReport)try{Ut(this.token,t,e)}catch(n){this.warn(n)}},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO"];n.includes(this.level)&&console.log.apply(console,Rt([this.getPrintPrefix("INFO")],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO","WARN"];n.includes(this.level)&&console.warn.apply(console,Rt([this.getPrintPrefix("WARN")],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO","WARN","ERROR"];n.includes(this.level)&&console.error.apply(console,Rt([this.getPrintPrefix("ERROR")],t))},t.id=0,t}(),Ft=zt,Lt=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Tt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},jt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},qt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jt(arguments[e]));return t},Bt=new Map,Ht=function(){function t(t,e){this.host=t,this.protocol=e}return t.prototype.isFrozen=function(){var t=(new Date).getTime(),e=Bt.get(this.host);return null!=e&&e>=t},t.prototype.freeze=function(t){void 0===t&&(t=20);var e=(new Date).getTime()+1e3*t;Bt.set(this.host,e)},t.prototype.unfreeze=function(){Bt["delete"](this.host)},t.prototype.getUrl=function(){return this.protocol+"://"+this.host},t.prototype.getUnfreezeTime=function(){return Bt.get(this.host)},t}(),Mt=function(){function t(t){void 0===t&&(t=[]),this.initHosts=t,this.cachedHostsMap=new Map}return t.prototype.register=function(t,e,n,r){this.cachedHostsMap.set(t+"@"+e,n.map((function(t){return new Ht(t,r)})))},t.prototype.refresh=function(t,e,n){var r,o,i,a;return Lt(this,void 0,void 0,(function(){var u,s,c;return Tt(this,(function(l){switch(l.label){case 0:return u=this.cachedHostsMap.get(t+"@"+e)||[],u.length>0?[2]:this.initHosts.length>0?(this.register(t,e,this.initHosts,n),[2]):[4,Q(t,e,n)];case 1:return s=l.sent(),null!=(null===s||void 0===s?void 0:s.data)&&(c=qt((null===(o=null===(r=s.data.up)||void 0===r?void 0:r.acc)||void 0===o?void 0:o.main)||[],(null===(a=null===(i=s.data.up)||void 0===i?void 0:i.acc)||void 0===a?void 0:a.backup)||[]),this.register(t,e,c,n)),[2]}}))}))},t.prototype.getUp=function(t,e,n){return Lt(this,void 0,void 0,(function(){var r,o,i;return Tt(this,(function(a){switch(a.label){case 0:return[4,this.refresh(t,e,n)];case 1:return a.sent(),r=this.cachedHostsMap.get(t+"@"+e)||[],0===r.length?[2,null]:(o=r.filter((function(t){return!t.isFrozen()})),o.length>0?[2,o[0]]:(i=r.slice().sort((function(t,e){return(t.getUnfreezeTime()||0)-(e.getUnfreezeTime()||0)})),[2,i[0]]))}}))}))},t}();function Dt(t,e,n,r){return t.config&&t.config.forceDirect?(r.info("ues forceDirect mode."),new Ot(t,e,n,r)):t.file.size>4*C?(r.info("file size over 4M, use Resume."),new kt(t,e,n,r)):(r.info("file size less or equal than 4M, use Direct."),new Ot(t,e,n,r))}function Nt(t,e,n,r,o){var i=new Ft(n,null===o||void 0===o?void 0:o.disableStatisticsReport,null===o||void 0===o?void 0:o.debugLogLevel,t.name),a={file:t,key:e,token:n,putExtra:r,config:Jt(o,i)},u=new Mt(a.config.uphost);return new p((function(t){var e=Dt(a,{onData:function(e){return t.next(e)},onError:function(e){return t.error(e)},onComplete:function(e){return t.complete(e)}},u,i);return e.putFile(),e.stop.bind(e)}))}var Vt=function(){return Vt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vt.apply(this,arguments)},Wt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},Gt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Xt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gt(arguments[e]));return t};function Jt(t,e){var n=Vt({},t),r=n.upprotocol,o=n.uphost,i=Wt(n,["upprotocol","uphost"]),a=Vt({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,checkByServer:!1,concurrentRequestLimit:3,chunkSize:ct,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},i);r&&(a.upprotocol=r.replace(/:$/,""));var u=[];if(e&&null!=(null===t||void 0===t?void 0:t.uphost)&&null!=(null===t||void 0===t?void 0:t.region)&&e.warn("do not use both the uphost and region config."),o)Array.isArray(o)?u.push.apply(u,Xt(o)):u.push(o);else if(null===a||void 0===a?void 0:a.region){var s=X[null===a||void 0===a?void 0:a.region];a.useCdnDomain?u.push.apply(u,Xt(s.cdnUphost)):u.push.apply(u,Xt(s.srcUphost))}return Vt(Vt({},a),{uphost:u.filter(Boolean)})}var Kt=function(){return Kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Kt.apply(this,arguments)},Yt=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))},$t=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Qt={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"},Zt=4,te=Math.log(2),ee=Object.keys(Qt).map((function(t){return Qt[t]})),ne=Qt.JPEG;function re(t){return ee.includes(t)}var oe=function(){function t(t,e){this.file=t,this.config=e,this.config=Kt({quality:.92,noCompressIfLarger:!1},this.config)}return t.prototype.process=function(){return Yt(this,void 0,void 0,(function(){var t,e,n,o,a,u;return $t(this,(function(s){switch(s.label){case 0:if(this.outputType=this.file.type,t={},!re(this.file.type))throw new i(r.UnsupportedFileType,"unsupported file type: "+this.file.type);return[4,this.getOriginImage()];case 1:return e=s.sent(),[4,this.getCanvas(e)];case 2:return n=s.sent(),o=1,this.config.maxWidth&&(o=Math.min(1,this.config.maxWidth/n.width)),this.config.maxHeight&&(o=Math.min(1,o,this.config.maxHeight/n.height)),t.width=n.width,t.height=n.height,[4,this.doScale(n,o)];case 3:return a=s.sent(),u=this.toBlob(a),u.size>this.file.size&&this.config.noCompressIfLarger?[2,{dist:this.file,width:t.width,height:t.height}]:[2,{dist:u,width:a.width,height:a.height}]}}))}))},t.prototype.clear=function(t,e,n){this.outputType===ne?(t.fillStyle="#fff",t.fillRect(0,0,e,n)):t.clearRect(0,0,e,n)},t.prototype.getOriginImage=function(){var t=this;return new Promise((function(e,n){var r=W(t.file),o=new Image;o.onload=function(){e(o)},o.onerror=function(){n("image load error")},o.src=r}))},t.prototype.getCanvas=function(t){var e=this;return new Promise((function(n,o){var a=document.createElement("canvas"),u=a.getContext("2d");if(u){var s=t.width,c=t.height;a.height=c,a.width=s,e.clear(u,s,c),u.drawImage(t,0,0),n(a)}else o(new i(r.GetCanvasContextFailed,"context is null"))}))},t.prototype.doScale=function(t,e){return Yt(this,void 0,void 0,(function(){var n,o,a,u,s,c,l,f,h,p,d,y,g,v,b,w;return $t(this,(function(m){if(1===e)return[2,t];if(n=t.getContext("2d"),o=Math.min(Zt,Math.ceil(1/e/te)),a=Math.pow(e,1/o),u=document.createElement("canvas"),s=u.getContext("2d"),c=t.width,l=t.height,f=c,h=l,u.width=c,u.height=l,!s||!n)throw new i(r.GetCanvasContextFailed,"mctx or sctx can't be null");for(y=0;y<o;y++)g=c*a|0,v=l*a|0,y===o-1&&(g=f*e,v=h*e),y%2===0?(p=t,d=s):(p=u,d=n),this.clear(d,c,l),d.drawImage(p,0,0,c,l,0,0,g,v),c=g,l=v;return b=p===t?u:t,w=d.getImageData(0,0,c,l),b.width=c,b.height=l,d.putImageData(w,0,0),[2,b]}))}))},t.prototype.toBlob=function(t){var e=t.toDataURL(this.outputType,this.config.quality),n=atob(e.split(",")[1]).split("").map((function(t){return t.charCodeAt(0)})),r=new Blob([new Uint8Array(n)],{type:this.outputType});return r},t}(),ie=function(t,e){return new oe(t,e).process()},ae=ie}}]);